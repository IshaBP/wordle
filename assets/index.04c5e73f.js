var N=Object.defineProperty;var I=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable;var T=(t,e,r)=>e in t?N(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,b=(t,e)=>{for(var r in e||(e={}))L.call(e,r)&&T(t,r,e[r]);if(I)for(var r of I(e))E.call(e,r)&&T(t,r,e[r]);return t};var H=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var f=(t,e,r)=>(H(t,e,"read from private field"),r?r.call(t):e.get(t)),M=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)};import{j as R,s as k,r as d,F as A,R as v,a as O}from"./vendor.c41c20c2.js";const P=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}};P();const a=R.exports.jsx,_=R.exports.jsxs,K=({code:t,status:e,onClick:r})=>a(j,{onClick:()=>{r(t)},status:e,children:G(t)}),G=t=>t==="<ENT>"?"ENTER":t==="<BKSP>"?"BK":t.toUpperCase(),j=k.button`
  background-color: ${t=>{const{status:e}=t;if(e==="MATCH")return"green";if(e==="PARTIAL_MATCH")return"yellow";if(e==="NO_MATCH")return"grey"}};
`,B=t=>{d.exports.useEffect(()=>{const e=r=>{const s=r.key.toLowerCase();s==="enter"?t("<ENT>"):s==="backspace"?t("<BKSP>"):q(s)&&t(s)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[t])},w={a:"a".charCodeAt(0),z:"z".charCodeAt(0)},q=t=>{const e=t.charCodeAt(0);return t.length===1&&w.a<=e&&e<=w.z},z=[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["<ENT>","z","x","c","v","b","n","m","<BKSP>"]],D=({keyMatchStatusMap:t,onKey:e})=>(B(e),a("section",{"aria-label":"keyboard",children:z.map((r,s)=>a(F,{keyRow:r,onKey:e,keyMatchStatusMap:t},s))})),F=({keyRow:t,keyMatchStatusMap:e,onKey:r})=>a("div",{"aria-label":"key-row",children:t.map(s=>a(K,{code:s,onClick:r,status:e[s]},s))}),U=({game:t,latestRowStatus:e})=>a(A,{as:"section",column:!0,gap:"1rem","aria-label":"wordboard",children:t.map((r,s)=>a(A,{"aria-label":"guess-word",gap:"1rem",children:r.map((n,o)=>a($,{"aria-label":"letter",status:n.matchStatus,children:n.matchStatus==="INITIAL"?"":n.key.toUpperCase()},o))},s))}),$=k(A).attrs({center:!0})`
  height: 2rem;
  width: 2rem;
  border: 1px solid black;
  padding: 5px;
  background-color: ${({status:t})=>{if(t==="MATCH")return"green";if(t==="PARTIAL_MATCH")return"yellow";if(t==="NO_MATCH")return"grey"}};
`,V=["allow","angel","baton","beads","baths","basis","glean","nudge","nuked","ounce"],S=t=>V.includes(t),W=()=>"angel",C=(t,e)=>{for(let r=0;r<t.length;r++)e(t[r],r)};var l;class J{constructor(e){M(this,l,new Map);C(e,r=>{this.increment(r)})}has(e){return f(this,l).has(e)&&this.get(e)!==0}get(e){var r;return(r=f(this,l).get(e))!=null?r:0}increment(e){this.has(e)?f(this,l).set(e,this.get(e)+1):f(this,l).set(e,1)}decrement(e){this.has(e)&&f(this,l).set(e,this.get(e)-1)}}l=new WeakMap;const Q=(t,e)=>{if(t.length!==e.length)throw new Error("chosenWord and guessWord should be of equal length");if(!S(t)||!S(e))return null;if(t===e)return new Array(t.length).fill("MATCH");const r=new J(t),s=[];return C(e,(n,o)=>{t[o]===n?(s[o]="MATCH",r.decrement(n)):s[o]="NO_MATCH"}),C(e,(n,o)=>{s[o]==="NO_MATCH"&&r.has(n)&&(s[o]="PARTIAL_MATCH",r.decrement(n))}),s},X=()=>{const t=d.exports.useMemo(()=>W(),[]),e=d.exports.useRef(!1),[r,s]=d.exports.useState(Z),[n,o]=d.exports.useState({}),[c,x]=d.exports.useState(0),[i,y]=d.exports.useState(0);return _("div",{"aria-label":"game",children:[a("span",{children:c}),a("span",{children:i}),a(U,{game:r,latestRowStatus:"IN_PROGRESS"}),a(D,{keyMatchStatusMap:n,onKey:g=>{if(!e.current){if(g==="<BKSP>"){if(i>0){const u=[...r];u[c][i-1]={key:void 0,matchStatus:"INITIAL"},s(u),y(i-1)}}else if(g==="<ENT>"){if(i===5){const u=r[c].map(m=>m.key).join(""),h=Q(t,u);if(h){const m=[...r];for(let p=0;p<h.length;p++)m[c][p].matchStatus=h[p];s(m),o(ee(m[c],n)),Y(h)?e.current=!0:c<5?(x(c+1),y(0)):e.current=!0}}}else if(i<5){const u=[...r];u[c][i]={key:g,matchStatus:"IN_PROGRESS"},s(u),y(i+1)}}}})]})},Y=t=>t.every(e=>e==="MATCH"),Z=()=>new Array(6).fill(null).map(()=>new Array(5).fill(null).map(()=>({key:void 0,matchStatus:"INITIAL"}))),ee=(t,e)=>{const r={INITIAL:0,IN_PROGRESS:1,NO_MATCH:2,PARTIAL_MATCH:3,MATCH:4},s=(n,o)=>n==null?o:r[n]>r[o]?n:o;for(let{key:n,matchStatus:o}of t)n&&(e[n]=s(e[n],o));return b({},e)},te=()=>a("main",{className:"App",children:a(X,{})});v.render(a(O.StrictMode,{children:a(te,{})}),document.getElementById("root"));
